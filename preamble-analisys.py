import numpy as np
import numpy.matlib

# Generating preamble
n_repetitions = 10
barker_code   = np.array([-1.0000 - 1.0000j, -1.0000 - 1.0000j, -1.0000 - 1.0000j, -1.0000 - 1.0000j, -1.0000 - 1.0000j,  1.0000 + 1.0000j,  1.0000 + 1.0000j, -1.0000 - 1.0000j, -1.0000 - 1.0000j,  1.0000 + 1.0000j, -1.0000 - 1.0000j,  1.0000 + 1.0000j, -1.0000 - 1.0000j])

preamble = np.matlib.repmat(barker_code, 1, n_repetitions)[0]
magn_preamble = np.sqrt(np.sum(np.power(np.abs(preamble),2)))

# Reading preable from captured logs  
captured_preamble = np.array([
#first
[-0.08 -0.59j, 0.10 -0.70j, 0.41 -0.47j, 0.10 -0.70j, 0.30 -0.78j, 0.04 + 0.66j, -0.01 + 0.68j, 0.45 -0.83j, -0.11 -0.13j, -0.50 + 0.39j, 0.47 -0.77j, 0.31 -0.07j, 0.37 -0.55j, -0.02 -0.66j, -0.06 -0.69j, 0.20 -1.05j, -0.13 -0.72j, 0.68 -0.48j, -0.49 + 0.55j, -0.84 + 0.20j, 0.00 -0.35j, 0.53 -0.87j, 0.04 + 0.81j, -0.06 -0.82j, -0.34 + 0.72j, -0.28 -0.74j, 0.25 -0.81j, 0.09 -1.14j, 0.53 -1.02j, 0.68 -0.32j, 0.69 -0.30j, -0.43 + 0.18j, 0.06 + 0.64j, 0.40 -0.72j, 0.15 -0.64j, -0.32 + 0.47j, 0.53 -0.62j, -0.63 + 0.50j, -0.22 -0.34j, 0.47 -0.75j, 0.86 -0.69j, 0.32 -0.45j, 0.15 -0.23j, 0.33 -0.65j, -0.13 + 0.58j, -0.63 + 0.37j, -0.02 -0.54j, 0.10 -0.27j, -0.29 + 0.52j, 0.49 -0.91j, -0.13 + 1.01j, -0.02 -0.47j, 0.05 -0.68j, 0.21 -0.48j, 0.56 -0.10j, 0.27 -0.61j, -0.02 -0.28j, -0.68 + 0.47j, -0.08 + 0.23j, -0.09 -0.60j, -0.32 -0.35j, -0.06 + 0.84j, -0.09 -0.14j, -0.24 + 0.39j, -0.08 -0.11j, -0.08 -0.36j, 0.66 -0.96j, -0.09 -0.86j, 0.20 -0.86j, 0.65 -0.63j, 0.13 -0.23j, 0.02 -0.01j, 0.23 -0.29j, 0.24 -0.44j, 0.05 + 0.57j, -0.18 -0.16j, -0.25 + 0.69j, -0.07 -0.72j, 0.12 -1.05j, 0.20 -0.99j, 0.17 -0.55j, 0.36 -0.35j, 0.40 -0.77j, -0.76 + 0.88j, -0.16 + 0.14j, 0.49 -1.12j, 0.02 -0.53j, -0.21 + 0.40j, 0.55 -0.46j, -0.32 + 1.50j, 0.23 -1.00j, 0.14 -0.65j, 0.11 + 0.05j, -0.21 -0.35j, 0.47 -0.73j, 0.41 -1.17j, -0.05 + 0.15j, -0.48 + 0.86j, 0.68 -0.53j, 0.56 -0.36j, 0.27 + 1.05j, -0.37 -0.61j, -0.06 + 0.45j, -0.60 -0.03j, 0.68 -0.79j, 0.22 -0.40j, 0.53 -0.60j, -0.01 -0.43j, -0.01 -1.28j, 0.01 + 0.70j, 0.26 + 0.41j, 0.47 -0.14j, -0.11 -0.28j, -0.37 + 0.65j, 0.62 -0.51j, -0.06 + 0.57j, 0.46 -0.42j, -0.19 -0.70j, 0.14 -0.22j, 0.53 -0.65j, 0.73 -0.91j, -0.04 -0.01j, -0.20 + 0.68j, 0.34 + 0.09j, 0.54 + 0.17j, 0.34 -0.90j, -0.26 + 0.74j, 0.31 -0.77j, -0.30 + 1.12j, -0.40 -0.76j],

#second 
[-0.63 -0.61j, -0.12 -0.38j, -0.65 -0.74j, -0.67 -0.51j, -0.52 -0.89j, 0.78 + 0.49j, 0.41 + 0.15j, -0.44 -0.58j, -0.47 -0.73j, 0.35 + 0.80j, -0.32 -1.06j, 0.25 + 0.79j, 0.00 -0.84j, -0.59 -0.29j, -0.75 -0.36j, -0.67 -0.51j, -0.53 -0.43j, -0.60 -0.91j, 0.26 + 0.60j, 0.92 + 0.08j, -0.05 -0.86j, -0.25 -0.08j, 0.20 + 0.47j, -0.36 -0.44j, 0.56 + 0.77j, -0.34 -0.47j, -0.43 -1.16j, -0.60 -0.26j, -0.85 -0.74j, -0.51 -0.92j, -0.49 -0.69j, 0.49 + 0.50j, 0.31 + 1.05j, -0.67 -0.44j, -0.82 -0.19j, -0.14 + 0.22j, 0.09 -0.78j, 0.17 -0.07j, -0.08 -0.37j, -0.36 -0.16j, -0.59 -0.96j, -0.04 -0.67j, -0.68 -1.02j, -0.24 -0.46j, 0.03 + 0.61j, 0.40 + 0.20j, -0.44 -0.38j, -0.45 -0.42j, 0.20 + 0.49j, -0.36 -0.13j, 0.45 + 0.71j, -0.82 -0.47j, -0.46 -0.52j, -1.00 -0.98j, -0.64 -0.44j, -0.27 -0.66j, -0.51 -0.74j, 0.70 + 0.78j, -0.24 + 0.52j, -0.62 -0.65j, -0.70 -0.41j, -0.06 + 0.62j, -0.35 -0.47j, 0.14 + 0.33j, -0.56 -0.40j, -0.50 -0.13j, -0.35 -0.47j, -0.20 -0.18j, -0.60 -0.29j, 0.41 -0.28j, 0.33 + 0.18j, 0.36 + 0.97j, 0.21 -0.60j, -0.20 + 0.16j, 0.17 + 0.58j, -0.11 -0.54j, 0.19 + 0.03j, -0.29 -0.53j, -0.36 -0.76j, -0.88 -0.46j, -0.82 -0.95j, -0.28 -0.49j, 0.18 -0.19j, 0.03 + 0.40j, 0.33 + 0.48j, -0.41 -1.00j, -0.43 -0.81j, 0.75 + 0.35j, 0.07 -0.67j, 0.19 + 0.67j, -0.48 -0.14j, -0.53 -0.37j, -0.43 -0.70j, -0.29 -0.45j, -0.19 -0.26j, -0.04 -0.87j, 0.82 + 0.43j, 0.50 + 0.29j, -0.25 -0.51j, -0.03 -0.39j, 0.17 + 0.28j, -0.60 -0.28j, 0.27 + 0.61j, -0.91 -0.24j, -0.27 -0.17j, -0.29 -0.03j, -0.56 -1.02j, -0.81 -0.57j, -0.52 -0.82j, 0.43 + 0.50j, 0.30 + 0.04j, -0.32 -0.32j, -0.10 -0.63j, 0.08 + 0.41j, -1.00 -0.99j, 0.25 + 0.42j, 0.17 -0.34j, -0.21 -0.16j, -0.70 -0.34j, -0.54 -0.15j, -0.72 -0.55j, 0.04 -0.52j, 0.24 + 0.37j, 0.68 + 0.60j, -0.72 + 0.06j, 0.16 -0.12j, 0.27 + 0.94j, -0.54 -0.48j, 0.64 + 0.54j, -0.12 + 0.42j],

#third
[-0.41 + 1.07j, -0.81 + 0.41j, -0.31 + 0.48j, 0.01 + 0.67j, -0.01 -0.48j, 0.22 -1.07j, 0.39 -0.29j, 0.01 + 1.00j, -0.30 + 0.21j, 0.36 -0.19j, -0.32 -0.05j, 0.13 -0.59j, -0.29 + 0.17j, 0.10 + 0.30j, -0.34 + 0.58j, -0.86 + 0.55j, -0.63 + 0.38j, -0.85 + 0.23j, 0.21 -0.24j, 0.48 -0.07j, -0.39 + 0.92j, -0.25 + 0.06j, 0.26 -0.25j, -0.37 + 0.76j, 0.65 -0.74j, -0.54 + 0.39j, -0.67 + 0.49j, -0.50 + 0.44j, -0.57 + 0.45j, -0.46 + 0.43j, -0.21 + 0.35j, 0.51 -0.61j, 0.37 -0.62j, -0.77 + 0.09j, -0.70 + 0.66j, 0.28 -0.72j, -0.22 + 0.69j, 0.44 -0.76j, -0.32 + 0.38j, -0.20 + 0.83j, -0.42 + 0.26j, -0.69 + 0.52j, -0.18 + 0.85j, -0.45 + 0.17j, 0.58 -0.39j, 0.05 -1.16j, -0.22 + 0.13j, -0.15 + 0.28j, -0.06 -0.55j, -0.01 + 0.52j, -0.12 -0.64j, -0.33 -0.05j, -0.55 + 0.22j, -0.07 + 0.01j, -0.60 + 0.36j, 0.29 + 0.94j, -0.00 + 0.93j, 0.38 -0.82j, 0.28 -0.46j, -0.23 + 0.24j, -0.53 + 0.13j, 0.30 -0.14j, -0.39 + 0.38j, 0.24 -0.33j, -0.48 + 0.33j, -0.21 + 0.18j, -0.24 + 1.04j, -0.52 + 0.58j, -0.29 + 1.00j, -0.13 + 0.57j, 0.30 -0.61j, 0.74 -0.57j, 0.62 + 0.26j, -0.27 -0.03j, 1.02 -0.54j, -0.18 + 0.39j, 0.92 -0.39j, -0.17 + 0.73j, 0.13 + 1.00j, -0.29 + 0.18j, -0.24 + 0.01j, -0.43 + 1.06j, -0.82 + 0.34j, 0.31 -0.47j, 0.13 -0.17j, 0.07 + 0.75j, 0.23 + 0.06j, -0.00 -0.49j, -0.96 + 0.29j, 0.69 -0.36j, -0.59 + 0.54j, -0.37 + 0.19j, -0.02 + 0.57j, -0.50 + 0.82j, -0.33 + 0.22j, -0.21 + 0.41j, 0.57 -0.53j, 0.42 -0.28j, -0.16 + 0.54j, -0.53 + 0.34j, 0.09 -0.47j, -0.21 + 1.13j, 0.65 -0.28j, -0.35 + 1.13j, -0.80 + 0.41j, -0.21 + 0.84j, -0.39 + 0.56j, -0.64 + 0.62j, -0.35 + 0.11j, 0.52 -0.30j, 0.48 -0.76j, 0.10 + 0.52j, -0.72 + 0.45j, 0.06 -0.49j, -0.31 + 0.50j, 0.49 -0.24j, -0.24 + 0.26j, -0.55 + 0.51j, -0.40 + 0.31j, -0.24 -0.14j, 0.08 + 0.30j, -0.85 + 0.27j, -0.15 -0.67j, 0.65 -0.15j, 0.04 -0.05j, -0.83 + 0.54j, 0.35 -0.50j, 0.02 + 0.88j, 0.42 -0.35j, -0.19 + 0.50j],

#fourth
[0.31 + 0.22j, 0.15 + 0.14j, 0.35 + 0.16j, 0.21 + 0.01j, 1.02 + 0.40j, 0.20 -0.26j, -0.24 -0.54j, 0.63 -0.15j, 0.90 + 0.23j, -0.75 -0.28j, 0.46 + 0.42j, -0.84 -0.27j, 0.68 + 0.07j, 0.09 + 0.62j, 0.89 + 0.20j, 0.71 + 0.70j, 0.92 + 0.44j, 0.41 + 0.26j, -0.12 -0.28j, -0.54 -0.24j, 0.27 + 0.34j, 0.56 + 0.23j, -0.45 -0.93j, 0.96 + 0.66j, -1.13 -0.28j, 0.72 + 0.30j, 0.53 + 0.64j, 0.86 + 0.21j, 0.83 -0.06j, 0.42 + 0.19j, 0.47 + 0.37j, -0.36 -0.54j, -0.45 -0.11j, 0.73 + 0.31j, 0.44 + 0.22j, -0.91 -0.61j, 0.27 + 0.10j, -0.26 + 0.28j, 0.62 + 0.41j, 0.21 + 0.36j, 0.03 + 0.17j, 0.39 + 0.44j, 0.63 + 0.86j, 0.42 + 0.21j, -0.44 -0.65j, -0.86 -0.29j, 0.52 -0.13j, 0.39 + 0.29j, -0.79 -0.49j, 0.78 + 0.46j, -0.50 -0.51j, 0.42 + 0.04j, 0.45 + 0.43j, 0.87 + 0.45j, 0.26 + 0.35j, 0.18 + 0.67j, 0.47 + 0.49j, -0.12 -0.43j, -0.54 -0.44j, -0.35 + 0.21j, 0.85 + 0.35j, -0.51 -0.57j, 0.14 -0.06j, -0.03 -0.44j, 0.73 + 0.54j, 1.09 + 0.17j, 0.39 + 0.28j, -0.34 + 0.15j, 0.92 + 0.45j, 0.15 + 0.43j, -0.83 -0.30j, 0.28 -0.16j, 0.27 + 0.07j, 0.43 + 0.22j, -0.48 -0.46j, 0.19 + 0.45j, -0.61 -0.69j, 0.29 + 0.47j, 0.72 + 0.51j, 0.79 + 0.22j, 0.70 + 0.30j, 0.89 + 0.05j, 0.93 + 0.58j, -0.38 -0.58j, -0.84 -0.29j, 0.73 + 0.56j, 0.42 -0.24j, -0.48 -0.38j, 0.57 -0.05j, -0.69 -0.40j, 0.89 + 0.36j, 0.08 + 0.82j, 1.17 -0.26j, 0.59 + 0.65j, 0.24 + 0.51j, 0.62 + 0.61j, -0.68 + 0.10j, -0.44 -0.24j, 0.22 -0.15j, 0.48 + 0.27j, -0.75 -0.19j, 0.75 + 0.16j, -0.30 -0.36j, 0.90 -0.01j, 0.51 + 0.42j, 0.95 + 0.38j, 0.54 + 0.52j, 0.41 + 0.46j, 0.24 + 0.63j, -0.79 -0.01j, -0.19 -0.43j, 0.33 + 0.15j, 0.32 + 0.02j, -0.13 + 0.42j, 0.39 + 0.55j, -0.38 -0.23j, 0.49 + 0.60j, 1.14 + 0.18j, 0.58 + 0.32j, 0.93 + 0.17j, 0.43 + 0.17j, 0.11 + 0.41j, -0.49 -0.17j, -0.34 -0.52j, 0.20 + 0.54j, -0.10 + 0.40j, -0.82 -0.30j, 0.03 + 0.81j, -0.88 + 0.12j, 0.04 + 0.62j],

#fifth
[-0.23 -1.08j, 0.64 -0.62j, 0.22 -0.86j, 0.71 -0.93j, 0.73 -0.03j, -0.52 + 0.21j, 0.01 + 0.49j, -0.08 + 0.12j, 0.13 -0.36j, -0.27 + 0.55j, 0.22 -0.59j, 0.14 + 0.33j, -0.08 -0.73j, 0.16 -0.67j, 0.30 -0.40j, -0.13 -0.49j, -0.00 -0.41j, -0.10 -0.64j, -0.33 + 0.00j, 0.06 + 0.25j, -0.29 + 0.00j, -0.26 -0.55j, 0.28 + 0.63j, -0.28 + 0.08j, 0.19 + 0.54j, 0.45 -0.22j, -0.18 -0.26j, 0.53 -0.86j, -0.05 -0.65j, 0.18 -0.95j, -0.18 -0.81j, -0.61 + 0.36j, -0.35 + 0.36j, 0.34 -0.75j, 0.40 -0.38j, -0.15 + 0.45j, 0.40 -0.43j, -0.31 + 0.49j, 0.37 -0.78j, 0.61 -0.14j, -0.22 -0.88j, 0.17 -0.94j, 0.16 -0.90j, 0.85 -0.62j, 0.22 + 0.63j, 0.10 + 0.21j, 0.13 -0.73j, 0.37 -0.25j, -0.15 + 0.54j, -0.06 -0.91j, -0.55 + 0.58j, 0.26 -0.09j, 0.31 -0.66j, 0.52 -0.99j, 0.30 -0.52j, 0.24 -0.36j, -0.20 -0.83j, 0.30 + 0.20j, -0.12 + 0.32j, 0.62 -0.49j, 0.53 -0.65j, 0.05 + 0.47j, -0.06 + 0.02j, -0.95 + 0.37j, -0.42 -0.47j, 0.46 -0.46j, -0.16 -0.68j, 0.46 -0.46j, 0.49 -0.79j, 0.33 -0.22j, -0.11 + 0.82j, -0.33 + 0.47j, -0.20 -0.18j, -0.02 + 0.30j, -0.87 + 0.56j, 0.43 -0.80j, -0.31 + 1.09j, 0.51 -0.86j, 0.51 -1.15j, 0.23 -0.83j, 0.37 -0.55j, -0.06 -0.28j, 0.64 -0.44j, 0.26 + 0.09j, -0.29 + 0.25j, 0.26 -0.82j, 0.28 -0.85j, -0.55 + 0.67j, 0.32 -0.22j, 0.05 + 0.70j, 0.23 -0.51j, 0.30 -0.42j, 0.16 -0.65j, 1.11 -0.63j, 0.33 -0.42j, 0.12 -0.52j, 0.05 + 0.68j, -0.24 + 0.54j, 0.12 -0.51j, 0.72 -0.05j, -0.17 + 0.73j, 0.81 + 0.17j, -0.24 + 0.74j, 0.28 -1.16j, 0.27 -0.45j, 0.77 -0.45j, -0.23 -0.51j, 0.27 -0.40j, -0.10 -0.59j, -0.48 -0.01j, -0.62 + 0.57j, 0.58 -0.85j, 0.34 -0.01j, -0.26 + 0.64j, 0.34 -0.49j, -0.19 + 0.69j, 0.10 -0.70j, 0.41 -0.69j, 0.48 -0.03j, 0.33 -0.88j, 0.83 -0.37j, -0.05 -0.75j, -0.37 + 0.78j, -0.35 + 0.44j, 0.20 -0.83j, 0.67 + 0.21j, -0.29 + 0.20j, 0.09 -0.36j, 0.25 + 0.75j, 0.08 -0.19j],

# Last
[0.33 + 0.81j, 0.68 + 0.37j, 0.36 + 0.52j, -0.08 + 0.38j, 0.10 + 0.32j, -0.09 -
0.35j, 0.16 - 0.44j, -0.10 + 0.54j, 0.09 + 0.24j, -0.84 - 0.80j, 0.43 + 0.70j,
-0.26 - 0.01j, 0.48 + 0.29j, 0.15 + 0.62j, 0.28 + 0.65j, 0.64 + 1.17j, 0.19 +
0.76j, 0.07 + 1.24j, -0.55 - 0.21j, -0.37 - 0.60j, 0.89 + 0.20j, 1.02 + 0.27j,
-0.86 - 0.74j, 0.15 + 0.40j, -0.04 - 0.87j, -0.43 + 0.04j, 0.52 + 0.26j, 0.78 +
0.76j, 0.00 + 0.75j, 0.47 + 0.38j, -0.05 + 0.77j, 0.05 - 0.70j, -0.18 - 0.42j,
-0.09 + 0.25j, 0.02 + 0.59j, -0.64 - 0.59j, -0.00 + 0.37j, -0.34 - 0.67j, 0.52 +
0.48j, 0.56 + 0.06j, 0.26 + 0.51j, 0.04 + 0.47j, -0.05 + 0.11j, 0.49 + 0.34j,
-0.15 - 0.14j, -0.14 - 0.51j, -0.14 + 0.44j, 0.09 + 0.17j, -0.38 - 0.69j, 0.26 +
0.38j, -0.34 + 0.20j, 0.43 + 0.80j, 0.59 + 0.61j, 0.75 + 1.19j, 0.52 + 0.90j,
-0.38 + 0.95j, 0.08 + 0.51j, 0.01 - 0.55j, 0.03 - 0.50j, 0.40 + 0.98j, 0.21 +
1.02j, -0.45 - 0.56j, 0.18 + 1.00j, -0.30 - 0.52j, 0.73 + 0.29j, 0.20 + 0.40j,
0.44 + 1.00j, -0.18 + 1.12j, 0.04 + 0.65j, 0.38 + 0.22j, -0.22 - 0.27j, -0.33 -
0.55j, 0.55 + 0.26j, 0.12 + 0.32j, -0.40 - 0.80j, 0.08 + 0.94j, -0.78 - 0.75j,
0.03 + 0.73j, 0.91 + 0.33j, 0.39 + 0.49j, 0.74 + 0.97j, 0.85 + 0.45j, 0.51 +
0.65j, -0.44 - 0.65j, 0.27 - 0.42j, 0.41 + 0.23j, -0.10 + 0.92j, -0.20 - 0.42j,
0.10 + 0.77j, -0.03 - 0.44j, 0.45 + 0.59j, 0.68 + 0.73j, -0.44 + 0.62j, 0.05 +
0.97j, 0.26 + 0.86j, 0.28 + 0.25j, -0.07 - 0.63j, -0.32 - 1.05j, 1.13 + 0.30j,
0.14 + 0.53j, 0.01 - 0.88j, 0.08 + 0.56j, 0.11 - 0.80j, 0.06 + 0.51j, 0.44 +
0.62j, 0.73 + 0.50j, 0.58 + 0.74j, -0.42 + 0.88j, -0.07 + 0.26j, 0.43 - 0.80j,
-0.00 - 0.60j, 0.55 + 0.47j, 0.51 + 0.47j, -0.06 - 0.69j, -0.02 - 0.05j, -0.39 -
0.41j, 0.47 + 0.74j, 0.07 + 0.61j, 0.41 + 0.45j, 0.74 + 0.62j, 0.40 + 0.82j,
-0.09 + 0.30j, 0.12 - 0.44j, 0.14 - 0.22j, 0.83 + 0.99j, 0.44 - 0.13j, -0.06 -
0.81j, 0.45 + 0.07j, -0.58 - 0.58j, 0.74 + 0.67j],

# Last -1
[1.17 + 0.02j, 1.00 - 0.02j, 0.65 + 0.53j, 0.81 + 0.01j, 1.07 + 0.20j, -0.33 +
0.43j, 0.04 - 0.28j, 0.48 + 0.24j, 0.44 + 0.17j, -0.49 + 0.23j, 0.54 + 0.31j,
-0.51 + 0.00j, 0.59 + 0.02j, 0.50 - 0.05j, 0.17 + 0.22j, 0.68 - 0.23j, 0.89 -
0.24j, 0.96 - 0.16j, -0.47 + 0.26j, -0.96 + 0.13j, 0.37 - 0.26j, 0.32 + 0.22j,
-0.60 + 0.15j, 0.42 + 0.09j, -1.01 + 0.25j, 0.86 + 0.26j, 0.88 + 0.08j, 1.04 -
0.30j, 1.17 + 0.05j, 0.26 + 0.36j, 0.65 + 0.40j, -0.26 + 0.08j, -0.68 - 0.15j,
0.63 + 0.24j, 0.58 - 0.09j, -0.65 + 0.05j, 1.01 - 0.22j, -0.77 - 0.00j, 0.18 -
0.21j, 0.59 - 0.01j, 0.92 - 0.03j, 0.49 - 0.28j, 0.75 - 0.17j, 0.55 + 0.23j,
-0.42 - 0.52j, -0.74 + 0.30j, 0.88 - 0.12j, 0.04 - 0.15j, -0.64 + 0.07j, 0.86 +
0.21j, -0.73 + 0.01j, 0.20 - 0.09j, 0.23 + 0.18j, 0.42 - 0.14j, 0.40 - 0.14j,
0.24 + 0.42j, 0.20 - 0.16j, -0.62 - 0.08j, 0.32 - 0.21j, 0.20 + 0.41j, 0.75 +
0.04j, -0.78 + 0.29j, 0.58 + 0.18j, -1.06 - 0.06j, 0.69 + 0.05j, 0.96 - 0.28j,
0.42 - 0.28j, 0.95 + 0.49j, 0.99 + 0.03j, 0.65 + 0.38j, -0.58 + 0.03j, -0.51 -
0.20j, 0.55 - 0.24j, 0.44 - 0.40j, -0.40 + 0.07j, 0.22 - 0.28j, -0.51 + 0.23j,
0.31 - 0.54j, 0.68 - 0.44j, 0.20 + 0.10j, 0.72 + 0.41j, 0.67 + 0.26j, 0.15 +
0.03j, -0.49 + 0.00j, -0.12 - 0.29j, 1.13 - 0.27j, 0.64 + 0.49j, -1.08 - 0.18j,
0.61 + 0.30j, -0.39 - 0.16j, 1.04 - 0.28j, 0.92 + 0.13j, 0.65 + 0.06j, 0.97 -
0.14j, 0.93 - 0.02j, 0.85 + 0.04j, -0.51 - 0.07j, -0.40 - 0.40j, 0.79 + 0.27j,
0.39 - 0.24j, -0.48 + 0.53j, 0.74 + 0.08j, -0.56 + 0.70j, 0.76 + 0.05j, 0.80 -
0.08j, 0.92 + 0.04j, 0.29 + 0.07j, 0.86 - 0.00j, 0.62 - 0.24j, -1.04 + 0.15j,
-0.17 + 0.02j, 1.24 - 0.20j, 0.43 + 0.36j, -0.87 + 0.40j, 0.28 + 0.15j, -0.15 +
0.10j, 0.38 + 0.28j, 0.60 + 0.48j, 0.41 - 0.06j, 1.33 - 0.24j, 0.40 - 0.28j,
0.49 - 0.24j, -0.45 + 0.11j, -0.22 + 0.24j, 0.44 + 0.26j, 0.17 + 0.01j, -0.10 -
0.15j, 0.67 + 0.35j, -1.17 + 0.14j, 0.64 - 0.72j], 

# Last -2
[0.70 + 0.02j, 0.64 - 0.52j, 0.56 + 0.01j, 0.75 - 0.55j, 0.86 - 0.17j, -0.62 +
0.47j, -0.39 + 0.12j, 0.51 - 0.42j, 1.07 - 0.21j, -0.60 + 0.26j, 0.62 - 0.07j,
-0.45 + 0.18j, 0.29 + 0.22j, 0.77 - 0.61j, 0.92 - 0.24j, 0.86 - 0.07j, 0.63 -
0.11j, 0.12 - 0.31j, -0.50 - 0.12j, -0.65 - 0.33j, 0.33 + 0.03j, 0.69 - 0.16j,
-0.67 - 0.29j, 0.61 + 0.11j, -0.49 + 0.23j, 0.28 - 0.34j, 0.65 - 0.26j, 0.92 -
0.02j, 0.90 + 0.07j, 0.67 - 0.37j, 0.82 - 0.20j, -0.19 + 0.32j, -0.18 - 0.24j,
0.42 - 0.24j, 0.43 - 0.28j, -0.18 + 0.35j, 0.79 - 0.38j, -0.28 + 0.35j, 0.49 -
0.01j, 0.70 + 0.10j, 0.84 - 0.66j, 0.16 - 0.21j, 0.45 + 0.16j, 0.34 - 0.06j,
-0.96 + 0.60j, -0.58 + 0.23j, 0.36 + 0.46j, 0.99 - 0.20j, -0.31 + 0.48j, 0.92 -
0.71j, -0.54 + 0.03j, 0.71 + 0.04j, 0.87 + 0.02j, 0.90 - 0.83j, 1.02 - 0.28j,
0.87 + 0.07j, 0.14 + 0.07j, -0.38 - 0.21j, -0.53 + 0.18j, 0.61 + 0.23j, 0.85 +
0.16j, -0.40 - 0.08j, 0.35 - 0.25j, -0.67 + 0.14j, 0.31 + 0.01j, 0.29 + 0.26j,
0.88 - 0.05j, 0.98 - 0.35j, 0.35 + 0.49j, 0.61 + 0.36j, -0.51 + 0.55j, -0.37 +
0.11j, 0.46 - 0.02j, 0.27 - 0.38j, -0.74 - 0.15j, 0.75 - 0.19j, -0.88 + 0.21j,
0.38 + 0.03j, 0.23 + 0.07j, 1.21 + 0.05j, 0.66 + 0.09j, 0.47 + 0.11j, 0.70 -
0.20j, -0.59 - 0.36j, -0.75 - 0.19j, -0.00 + 0.28j, 0.27 + 0.18j, -0.47 - 0.29j,
0.37 + 0.21j, -0.66 - 0.21j, 0.28 - 0.37j, 1.02 - 0.19j, 0.40 - 0.45j, 1.15 +
0.19j, 0.40 + 0.70j, 0.77 - 0.28j, -0.71 - 0.11j, -0.80 - 0.57j, 0.87 + 0.19j,
0.63 + 0.45j, -0.75 + 0.42j, 0.52 - 0.56j, -0.62 + 0.19j, 0.37 - 0.22j, 0.71 -
0.39j, 0.55 + 0.13j, 1.01 - 0.27j, -0.04 + 0.34j, 0.17 - 0.33j, -0.63 + 0.24j,
-0.93 + 0.15j, 0.38 + 0.11j, 0.43 + 0.21j, -0.43 - 0.08j, 0.69 - 0.19j, -0.85 +
0.13j, 0.67 - 0.34j, 0.49 - 0.46j, 0.35 + 0.06j, 0.36 + 0.80j, 0.35 + 0.12j,
0.43 + 0.21j, -0.36 + 0.38j, -0.94 + 0.11j, 0.51 + 0.24j, 0.73 - 0.36j, -0.84 +
0.61j, 0.55 + 0.07j, -0.59 + 0.42j, 0.78 - 0.17j],

# Last -3
[0.20 - 0.21j, -0.06 - 1.04j, 1.10 - 0.10j, 0.93 - 0.25j, 0.15 + 0.22j, -0.32 +
0.37j, -0.43 + 0.14j, 0.82 - 0.42j, 0.36 + 0.36j, -0.26 + 0.36j, 0.73 + 0.32j,
-0.46 + 0.36j, 0.67 - 0.47j, 0.17 + 0.11j, 0.22 + 0.17j, 0.84 + 0.25j, 0.54 -
0.31j, 0.38 - 0.06j, -0.08 - 0.38j, -0.55 - 0.11j, 0.61 - 0.64j, 0.48 - 0.55j,
-0.36 - 0.53j, 0.10 - 0.37j, -0.97 - 0.31j, 0.48 - 0.16j, 0.34 - 0.63j, 0.07 -
0.06j, 0.56 - 0.59j, 1.04 - 0.13j, 0.81 + 0.13j, -0.54 + 0.09j, -0.45 + 0.56j,
0.49 - 0.63j, 0.61 - 0.46j, 0.07 + 0.34j, 0.67 - 0.13j, -1.01 - 0.24j, 0.57 -
0.67j, 0.87 + 0.13j, 0.67 - 0.49j, 0.29 - 0.46j, 0.82 - 0.55j, 0.45 + 0.09j,
-1.29 + 0.26j, -0.94 + 0.12j, 0.57 - 0.10j, 0.27 - 0.41j, -0.86 + 0.05j, 0.41 +
0.18j, -0.37 - 0.28j, 0.56 - 0.30j, 0.22 - 0.23j, 0.09 - 0.76j, 0.70 - 0.51j,
0.68 - 0.54j, 0.04 - 0.13j, -0.48 + 0.44j, -0.50 + 0.34j, -0.07 - 0.18j, 0.59 -
0.22j, -0.01 + 0.58j, 0.52 - 0.44j, -0.80 + 0.28j, 0.91 - 0.70j, -0.01 - 0.15j,
0.75 + 0.10j, 0.70 + 0.01j, 0.77 - 0.29j, 0.49 + 0.02j, -0.87 + 0.57j, -0.56 +
0.01j, -0.11 - 0.45j, 0.16 + 0.28j, -0.52 + 0.04j, 0.27 - 0.16j, -0.00 + 0.12j,
0.53 - 0.95j, 0.29 - 0.15j, 0.70 - 0.48j, 0.50 - 0.32j, 0.73 - 0.39j, 0.63 -
0.52j, -0.07 + 0.09j, -0.29 + 0.42j, 0.49 - 0.64j, 0.85 - 0.13j, 0.21 + 0.03j,
0.56 - 0.62j, -0.48 + 0.74j, 0.42 - 0.31j, 0.16 - 0.51j, 0.83 - 0.60j, 0.79 -
0.31j, 0.25 - 0.17j, 0.20 - 0.64j, -0.87 + 0.42j, -0.72 - 0.11j, 0.21 + 0.11j,
0.39 - 0.18j, -0.51 + 0.07j, 0.52 - 0.69j, -0.14 + 0.32j, 0.35 + 0.16j, -0.31 -
0.38j, 0.78 - 0.39j, 0.58 - 0.02j, 0.86 - 0.48j, 0.62 - 0.38j, -1.14 + 0.62j,
-0.92 - 0.22j, 0.74 + 0.03j, -0.01 - 0.12j, -0.62 - 0.07j, 0.66 - 0.19j, -0.65 +
0.30j, 0.33 - 0.48j, 0.51 + 0.01j, 0.35 - 0.02j, 0.67 - 0.26j, 0.64 - 0.64j,
0.35 + 0.30j, -0.87 + 0.28j, -0.49 + 0.42j, 0.47 + 0.38j, 0.87 - 0.22j, -0.01 +
0.25j, 0.65 - 0.15j, -1.02 + 0.45j, 0.32 + 0.09j], 

# Last -4
[0.27 - 0.09j, 0.95 - 0.01j, 0.66 - 0.27j, 0.38 - 0.05j, 0.81 - 0.25j, 0.14 - 0.00j, -0.26 + 0.10j, 0.76 - 0.23j, 0.24 - 0.07j, -0.58 + 0.42j, 0.90 + 0.21j, -0.82 - 0.28j, 0.34 - 0.18j, 0.49 - 0.55j, 0.45 - 0.19j, 0.60 - 0.52j, 0.68 - 0.35j, 0.42 + 0.14j, -0.86 - 0.19j, -0.65 + 0.10j, -0.07 - 0.28j, 0.85 - 0.15j, -0.30 + 0.09j, 0.65 + 0.19j, -0.94 - 0.33j, 0.59 - 0.45j, 0.45 - 0.20j, 0.46 - 0.24j, 0.96 - 0.29j, 0.59 - 0.02j, 0.35 + 0.04j, -0.38 + 0.48j, -0.73 + 0.21j, 0.44 + 0.20j, 0.17 + 0.32j, -0.64 + 0.11j, 0.43 - 0.17j, -0.64 - 0.35j, 0.88 + 0.04j, 0.44 - 0.04j, 0.46 - 0.55j, 0.50 - 0.79j, 0.77 + 0.11j, 0.47 + 0.24j, -0.97 + 0.96j, -0.67 - 0.08j, 0.41 - 0.40j, 0.48 - 0.24j, -0.35 + 0.14j, 0.21 - 0.45j, -0.12 - 0.13j, 0.51 + 0.38j, 0.56 - 0.39j, 0.45 + 0.16j, 0.35 - 0.17j, 0.62 - 0.26j, 0.82 - 0.19j, 0.08 - 0.00j, -0.53 + 0.55j, -0.02 - 0.21j, 0.45 - 0.44j, -0.62 + 0.28j, 0.58 - 0.12j, -0.93 - 0.11j, 0.51 - 0.63j, 0.52 - 0.25j, 1.22 - 0.23j, 0.64 - 0.18j, 0.63 - 0.53j, 0.79 - 0.12j, -0.87 + 0.32j, -0.39 - 0.04j, 0.38 - 0.55j, 0.51 + 0.22j, -0.82 + 0.36j, 0.46 - 0.32j, -0.59 + 0.19j, 0.59 - 0.15j, 0.70 + 0.12j, 1.00 - 0.29j, 1.01 - 0.05j, 0.87 + 0.06j, 0.28 + 0.01j, -0.84 + 0.22j, -0.30 + 0.15j, 0.75 + 0.12j, 0.10 + 0.02j, -0.50 + 0.05j, 0.57 - 0.07j, -0.87 + 0.32j, 0.79 + 0.00j, 0.97 - 0.23j, 0.67 + 0.24j, 0.92 - 0.41j, 0.97 - 0.77j, 0.83 - 0.32j, -0.65 + 0.01j, -0.69 + 0.25j, 0.12 + 0.18j, 0.43 - 0.37j, -0.64 - 0.04j, 0.31 - 0.14j, -0.61 + 0.62j, 0.73 - 0.28j, 0.61 - 0.16j, 0.71 - 0.05j, 0.52 - 0.53j, 1.16 + 0.20j, 0.94 - 0.07j, -0.54 + 0.25j, -0.14 + 0.61j, 0.49 - 0.43j, -0.04 - 0.35j, -0.93 - 0.22j, 0.50 + 0.01j, -0.57 + 0.22j, 0.30 - 0.41j, 0.68 + 0.11j, 1.03 - 0.14j, 0.45 - 0.14j, 0.39 - 0.31j, -0.02 + 0.22j, -0.95 - 0.14j, -0.53 - 0.01j, 0.29 - 0.38j, 0.82 + 0.03j, -0.55 + 0.31j, 0.78 - 0.69j, -0.52 + 0.06j, 0.67 + 0.58j] 
])

def magn(ind_preamble: int, preambles: np.array) -> np.float:
    magn_val = np.sqrt(np.sum(np.power(np.abs(preambles[ind_preamble]),2)))
    return magn_val

def phase(original_preambles: np.array, captured_preambles: np.array) -> np.float:
    phases_diff = np.abs(np.arctan(original_preambles.imag/original_preambles.real)-np.arctan(captured_preambles.imag/captured_preambles.real))
    return phases_diff

def find_values(filename:str, keyword:str, n_elements: int) -> np.array:
    elements = np.array([])
    ind = -1
    count = 0
    with open(filename) as file:
        for line in file:
            if(line==keyword):
                count = count+1
                ind=0
                continue
            if(ind>=0 and ind<=n_elements):
                elements = np.append(elements, line)
                ind=ind+1
                if(ind==n_elements):
                    ind = -1
    elements = np.char.replace(elements, "j", "")
    elements = np.char.replace(elements, "+ -", "-")
    elements = np.char.replace(elements, "\n", "j")
    elements = np.char.replace(elements, ",", ".")
    elements = np.char.replace(elements, " ", "")
    
    elements = np.reshape(elements.astype(np.complex), (count, n_elements))
    return(elements)

            

#print(phase(preamble, captured_preamble[1]))
elements = find_values("preamble.log", "COMECO\n", 130)